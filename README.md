Partclone is a project similar to the well-known backup utility "Partition Image" a.k.a partimage. Partclone provides utilities to back up and restore used-blocks of a partition and it is designed for higher compatibility of the file system by using existing library, e.g. e2fslibs is used to read and write the ext2 partition.

Partclone now supports ext2, ext3, ext4, hfs+, reiserfs, reiser4, btrfs, vmfs3, vmfs5, xfs, jfs, ufs, ntfs, fat(12/16/32), exfat...

We made some utilities:

* partclone.ext2, partclone.ext3, partclone.ext4
* partclone.extfs
* partclone.reiserfs
* partclone.reiser4
* partclone.xfs
* partclone.exfat
* partclone.fat (fat 12, fat 16, fat 32)
* partclone.ntfs
* partclone.hfsp
* partclone.vmfs(v3 and v5)
* partclone.ufs
* partclone.jfs
* partclone.btrfs
* partclone.minix
* partclone.f2fs
* partclone.nilfs
* partclone.info 
* partclone.restore
* partclone.chkimg
* partclone.dd
...

master branch is NOT STABLE, Please check 'release' branch

Basic Usage:

 - clone partition to image

    `partclone.ext4 -d -c -s /dev/sda1 -o sda1.img`

 - restore image to partition

    `partclone.ext4 -d -r -s sda1.img -o /dev/sda1`

 - partiiton to partition clone

    `partclone.ext4 -d -b -s /dev/sda1 -o /dev/sdb1`

 - display image information

    `partclone.info -s sda1.img`

 - check image

    `partclone.chkimg -s sda1.img`

For more info about partclone, check our website http://partclone.org or github-wiki.

Build (Dynamic Link) on Amazon Linux 2

    $ sudo yum update -y
    $ sudo yum install -y gcc glibc glibc-common 
    $ sudo yum install -y libuuid-devel
    $ sudo yum grouplist
    $ sudo yum groupinstall -y "development tools"
    $ sudo yum install -y rpm-build
    $ sudo yum install -y ncurses-devel ncurses-libs
    $ sudo yum install -y e2fsprogs-devel
    $ sudo yum install -y libblkid-devel
    $ sudo yum install -y fuse

    $ vi /etc/resolv.conf
    ; generated by /usr/sbin/dhclient-script
    search ap-northeast-1.compute.internal
    options timeout:2 attempts:5
    nameserver 172.31.0.2
    nameserver 8.8.8.8

    $ sudo rpm -Uvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm
    $ sudo yum install -y ntfs-3g-devel
    $ sudo yum install -y openssl-devel
    $ sudo yum install -y xfsprogs-devel

    $ git clone https://github.com/ksekimoto/partclone.git

    $ ./autogen
    $ ./configure --enable-extfs --enable-minix --enable-btrfs --enable-f2fs --enable-exfat --enable-ntfs --enable-ncursesw
    $ make
    $ sudo make install

Build rpm

    $ sudo yum install -y rpmdevtools yum-utils
    $ rpmdev-setuptree
    $ #ls -1 ~/rpmbuild/
    $ mv partclone partclone-0.3.13
    $ tar czvf partclone-0.3.13.tar.gz partclone-0.3.13/
    $ mv partclone-0.3.13.tar.gz rpmbuild/SOURCES/
    $ cp partclone-0.3.13/README.Packages/partclone.spec rpmbuild/SPECS/
    $ #vi rpmbuild/SPECS/partclone.spec (if necessary)
    $ rpmbuild -bb rpmbuild/SPECS/partclone.spec

Build (Static Link) on Amazon Linux 2

    $ sudo yum update -y
    $ sudo yum install -y gcc glibc glibc-common 
    $ sudo yum install -y libuuid-devel
    $ sudo yum grouplist
    $ sudo yum groupinstall -y "development tools"
    $ sudo yum install -y rpm-build
    $ sudo yum install -y ncurses-devel ncurses-libs
    $ sudo yum install -y e2fsprogs-devel
    $ sudo yum install -y libblkid-devel
    $ sudo yum install -y fuse

    $ vi /etc/resolv.conf
    ; generated by /usr/sbin/dhclient-script
    search ap-northeast-1.compute.internal
    options timeout:2 attempts:5
    nameserver 172.31.0.2
    nameserver 8.8.8.8

    $ sudo rpm -Uvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm
    $ sudo yum install -y ntfs-3g-devel
    $ sudo yum install -y openssl-devel
    $ sudo yum install -y xfsprogs-devel

    $ sudo yum install -y e2fsprogs-static
    $ sudo yum install -y zlib-static
    $ sudo yum install -y ncurses-static
    $ sudo yum install -y openssl-static
    $ sudo yum install -y glibc-static

    # build libuuid.a static library
    $ wget https://sourceforge.net/projects/libuuid/files/libuuid-1.0.3.tar.gz
    $ tar xvf libuuid-1.0.3.tar.gz
    $ cd libuuid-1.0.3/
    $ ./configure --enable-static
    $ make
    $ sudo make install  

    # build ntfs-3g static library
    $ git clone https://git.code.sf.net/p/ntfs-3g/ntfs-3g ntfs-3g-ntfs-3g
    $ cd ntfs-3g-ntfs-3g
    $ ./autogen.sh
    $ ./configure --enable-static
    $ make
    $ sudo make install

    # build libblkid.a static library
    $ git clone https://github.com/karelzak/util-linux.git
    $ cd util-linux
    $ ./autogen.sh
    $ ./configure --enable-static
    $ make
    $ sudo make install   
 
    $ git clone https://github.com/ksekimoto/partclone.git

    $ ./autogen
    $ ./configure --enable-extfs --enable-xfs --enable-hfsp --enable-fat --enable-exfat --enable-f2fs --enable-ntfs --enable-btrfs --enable-minix  --enable-ncursesw --enable-static LIBS="-ldl -ltinfo -lz"

    $ make
    $ sudo make install

Build rpm

    $ sudo yum install -y rpmdevtools yum-utils
    $ rpmdev-setuptree
    $ #ls -1 ~/rpmbuild/
    $ mv partclone partclone-0.3.13
    $ tar czvf partclone-0.3.13.tar.gz partclone-0.3.13/
    $ mv partclone-0.3.13.tar.gz rpmbuild/SOURCES/
    $ cp partclone-0.3.13/README.Packages/partclone.spec rpmbuild/SPECS/
    $ vi rpmbuild/SPECS/partclone.spec (comment out for a configure line for dynamic link and uncomment out a configure line for static link)
    $ rpmbuild -bb rpmbuild/SPECS/partclone.spec
